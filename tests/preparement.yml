---
- hosts: localhost
  remote_user: root

  vars:
    postgresql_databases:
      - name: mattermost
        owner: mattermost

    postgresql_users:
      - name: mattermost
        pass: mattermost

    postgresql_user_privileges:
      - name: mattermost
        db: mattermost
        priv: "ALL"
        role_attr_flags: "CREATEDB"

    postgresql_listen_addresses: ['0.0.0.0', '::']

    postgresql_pg_hba_custom:
      - { type: "host", database: "all", user: "all", address: "127.0.0.0/8", method: "md5" }
      - { type: "host", database: "all", user: "all", address: "10.0.0.0/8", method: "md5" }
      - { type: "host", database: "all", user: "all", address: "172.16.0.0/12", method: "md5" }
      - { type: "host", database: "all", user: "all", address: "192.168.0.0/16", method: "md5" }

  roles:
    - "ANXS.postgresql"
